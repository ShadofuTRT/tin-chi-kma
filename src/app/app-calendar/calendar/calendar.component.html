<div
  id="calendar-table-container"
  class="rounded-lg"
  style="
    overflow: scroll;
    overflow-x: hidden;
    overflow-y: overlay;
    max-height: calc(100vh - 18rem);
  "
>
  <table id="calendar-table" class="table table-compact w-full table-fixed">
    <tbody>
      <ng-template
        [ngIf]="true"
        *ngFor="
          let date of (calendar$ | async)?.dateList;
          let dateIndex = index
        "
      >
        <tr *ngIf="getDayFromDate(date) === 1">
          <th colspan="2" class="text-center bg-base-200">
            <div class="grid grid-cols-2 grid-rows-2">
              <span></span>
              <span>Tiết</span>
              <span>Thứ</span>
              <span></span>
            </div>
            <div
              class="relative border-base-content border-b w-full"
              style="
                transform: skewY(30deg) translateY(-1.1rem) translateX(0.1rem)
                  scaleX(0.3);
              "
            ></div>
          </th>
          <th class="text-center bg-base-200">1</th>
          <th class="text-center bg-base-200">2</th>
          <th class="text-center bg-base-200">3</th>
          <th class="text-center bg-base-200">4</th>
          <th class="text-center bg-base-200">5</th>
          <th class="text-center bg-base-200">6</th>
          <th class="text-center text-base-100 bg-neutral">7</th>
          <th class="text-center text-base-100 bg-neutral">8</th>
          <th class="text-center text-base-100 bg-neutral">9</th>
          <th class="text-center text-base-100 bg-neutral">10</th>
          <th class="text-center text-base-100 bg-neutral">11</th>
          <th class="text-center text-base-100 bg-neutral">12</th>
          <th class="text-center text-base-100 bg-neutral-focus">13</th>
          <th class="text-center text-base-100 bg-neutral-focus">14</th>
          <th class="text-center text-base-100 bg-neutral-focus">15</th>
          <th class="text-center text-base-100 bg-neutral-focus">16</th>
        </tr>
        <tr>
          <td colspan="2" class="text-xs text-center">
            <span class="font-bold text-lg">
              {{ dayOfWeekMap[getDayFromDate(date)] }} </span
            ><br />
            {{ dateNumberToDate(date).toLocaleDateString("vi") }}
          </td>
          <td
            *ngFor="let session of sessions"
            class="px-2"
            [ngClass]="{
              'bg-neutral': checkSession(session) === 'afternoon',
              'bg-neutral-focus': checkSession(session) === 'evening'
            }"
          >
            <div
              *ngIf="(calendarTableContent$ | async)[date][session].length"
              class="dropdown w-full"
              [ngClass]="{
                'dropdown-end': ['afternoon', 'evening'].includes(
                  checkSession(session)
                ),
                'dropdown-top':
                  dateIndex === (calendar$ | async)!.dateList.length - 1
              }"
            >
              <button
                tabindex="0"
                class="btn btn-primary btn-sm block w-full"
                [ngClass]="{
                  'btn-accent':
                    (calendarTableContent$ | async)[date][session].length > 1
                }"
              >
                {{
                  (calendarTableContent$ | async)[date][session].length === 1
                    ? "✓"
                    : "✕"
                }}
              </button>
              <ul
                tabindex="0"
                class="dropdown-content menu p-4 mt-1 text-neutral text-neural-focus rounded-lg z-50 w-[20rem] list-disc"
                [ngClass]="{
                  'bg-primary':
                    (calendarTableContent$ | async)[date][session].length === 1,
                  'bg-accent':
                    (calendarTableContent$ | async)[date][session].length > 1
                }"
              >
                <li
                  class="text-md"
                  *ngFor="
                    let sessionContentDetail of (calendarTableContent$ | async)[
                      date
                    ][session]
                  "
                >
                  {{ sessionContentDetail.defaultName }}
                </li>
              </ul>
            </div>
          </td>
        </tr>
      </ng-template>
    </tbody>
  </table>
</div>
